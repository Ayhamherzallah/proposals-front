@import "tailwindcss";

:root {
  /* Premium Professional Palette */
  --foreground: 15 23 42; /* Slate 900 */
  --background: 248 250 252; /* Slate 50 */
  
  --card: 255 255 255;
  --card-foreground: 15 23 42;
  
  --primary: 15 23 42; /* Deep Black/Blue */
  --primary-foreground: 255 255 255;
  
  --secondary: 241 245 249; /* Slate 100 */
  --secondary-foreground: 30 41 59;
  
  --accent: 37 99 235; /* Blue 600 */
  --accent-foreground: 255 255 255;
  
  --muted: 241 245 249;
  --muted-foreground: 100 116 139; /* Slate 500 */
  
  --input: 226 232 240;
  --ring: 15 23 42;
  
  --border: 226 232 240; /* Slate 200 */
  
  --radius: 0.75rem;
}

@layer base {
  /* Body styles moved to layout.tsx to avoid @apply issues with v4 alpha/beta handling */
  * {
    font-family: var(--font-sora), system-ui, -apple-system, sans-serif;
  }
}

/* Custom Scrollbar */
.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.2);
}

/* Glassmorphism & Modern Utils */
.glass-panel {
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.5);
}

.transition-all-fast {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Tiptap Editor Styles */
.ProseMirror {
  outline: none;
}

.ProseMirror h1 {
  font-size: 2.25rem;
  font-weight: 700;
  color: #1e293b;
  margin-top: 2rem;
  margin-bottom: 1rem;
}

.ProseMirror h2 {
  font-size: 1.875rem;
  font-weight: 700;
  color: #334155;
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
}

.ProseMirror h3 {
  font-size: 1.5rem;
  font-weight: 600;
  color: #475569;
  margin-top: 1.25rem;
  margin-bottom: 0.5rem;
}

/* Modern Professional Tables */
.ProseMirror table,
.modern-table {
  border-collapse: separate;
  border-spacing: 0;
  width: 100%;
  margin: 1.5rem 0;
  overflow: hidden;
  border-radius: 8px;
  border: 1px solid #cbd5e1;
}

.ProseMirror table td,
.ProseMirror table th,
.modern-table td,
.modern-table th {
  min-width: 100px;
  border: 1px solid #cbd5e1;
  padding: 0.75rem 1rem;
  vertical-align: top;
  box-sizing: border-box;
  position: relative;
}

.ProseMirror table th,
.modern-table th {
  font-weight: 700;
  text-align: left;
  background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
  color: white;
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.ProseMirror table th:first-child,
.modern-table th:first-child {
  border-top-left-radius: 8px;
}

.ProseMirror table th:last-child,
.modern-table th:last-child {
  border-top-right-radius: 8px;
}

.ProseMirror table tbody tr:nth-child(odd) td,
.modern-table tbody tr:nth-child(odd) td {
  background-color: #ffffff;
}

.ProseMirror table tbody tr:nth-child(even) td,
.modern-table tbody tr:nth-child(even) td {
  background-color: #f8fafc;
}

.ProseMirror table tbody tr:last-child td:first-child,
.modern-table tbody tr:last-child td:first-child {
  border-bottom-left-radius: 8px;
}

.ProseMirror table tbody tr:last-child td:last-child,
.modern-table tbody tr:last-child td:last-child {
  border-bottom-right-radius: 8px;
}

.ProseMirror table td strong,
.modern-table td strong {
  color: #1e293b;
  font-weight: 600;
}

.ProseMirror table .selectedCell:after {
  z-index: 2;
  position: absolute;
  content: "";
  left: 0; right: 0; top: 0; bottom: 0;
  background: rgba(59, 130, 246, 0.1);
  border: 1px solid rgba(59, 130, 246, 0.3);
  pointer-events: none;
}

/* Premium Table Styles */
.premium-table {
  border-collapse: separate;
  border-spacing: 0;
  width: 100%;
  margin: 2.5rem 0;
  overflow: hidden;
  border-radius: 16px;
  box-shadow: 
    0 10px 15px -3px rgba(0, 0, 0, 0.1),
    0 4px 6px -2px rgba(0, 0, 0, 0.05),
    0 0 0 1px rgba(0, 0, 0, 0.05);
  background: white;
}

.premium-table thead {
  background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
  position: relative;
}

.premium-table th {
  color: white;
  font-weight: 700;
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 0.75rem 1rem;
  text-align: left;
  border: 1px solid #cbd5e1;
  position: relative;
}

.premium-table tbody tr {
  background: white;
  position: relative;
}

.premium-table tbody tr:nth-child(even) {
  background: #f8fafc;
}

.premium-table td {
  padding: 0.75rem 1rem;
  border: 1px solid #cbd5e1;
  color: #1e293b;
  font-size: 0.875rem;
  line-height: 1.6;
  position: relative;
  vertical-align: top;
}

.premium-table tbody tr:last-child td {
  border-bottom: 1px solid #cbd5e1;
}

.premium-table td strong {
  color: #0f172a;
  font-weight: 600;
}

/* Premium Table - Rounded Corners */
.premium-table thead tr:first-child th:first-child {
  border-top-left-radius: 8px;
}

.premium-table thead tr:first-child th:last-child {
  border-top-right-radius: 8px;
}

.premium-table tbody tr:last-child td:first-child {
  border-bottom-left-radius: 8px;
}

.premium-table tbody tr:last-child td:last-child {
  border-bottom-right-radius: 8px;
}

/* Premium Table - Selected Cell */
.premium-table .selectedCell {
  background: rgba(59, 130, 246, 0.15) !important;
  position: relative;
}

.premium-table .selectedCell::after {
  content: '';
  position: absolute;
  inset: 0;
  border: 2px solid #3b82f6;
  pointer-events: none;
  border-radius: 4px;
}

/* Process Page Styles */
.process-display .process-container {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.process-display .process-step {
  background: linear-gradient(135deg, #DBEAFE 0%, #BFDBFE 100%);
  border-radius: 1rem;
  padding: 1.25rem 1.5rem;
  display: flex;
  gap: 1.5rem;
  align-items: flex-start;
}

.process-display .step-number {
  font-size: 2.5rem;
  font-weight: 700;
  color: #2563EB;
  line-height: 1;
  flex-shrink: 0;
  width: 60px;
  text-align: left;
}

.process-display .step-content {
  flex: 1;
  padding-top: 0.25rem;
}

.process-display .step-title {
  font-size: 1.125rem;
  font-weight: 700;
  color: #2563EB;
  margin-bottom: 0.375rem;
  line-height: 1.2;
}

.process-display .step-description {
  font-size: 0.875rem;
  color: #1e293b;
  line-height: 1.5;
}

/* Print Overrides */
@media print {
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }
  
  body {
    background: white;
  }
  
  @page {
    size: A4;
    margin: 0;
  }
  
  /* Page breaks */
  .page-break {
    page-break-after: always;
    break-after: page;
  }
  
  /* Prevent awkward breaks */
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
    break-after: avoid-page;
    page-break-inside: avoid;
    break-inside: avoid;
  }
  
  /* Allow content to flow across pages */
  table {
    page-break-inside: auto;
    break-inside: auto;
  }
  
  ul, ol {
    page-break-inside: auto;
    break-inside: auto;
  }
  
  li {
    page-break-inside: avoid;
    break-inside: avoid;
  }
  
  tr {
    page-break-inside: avoid;
    break-inside: avoid;
  }
  
  p {
    orphans: 3;
    widows: 3;
  }
  
  /* Utility classes */
  .print\:hidden {
    display: none !important;
  }
  
  .print\:shadow-none {
    box-shadow: none !important;
  }
  
  .print\:mb-0 {
    margin-bottom: 0 !important;
  }
  
  /* Force page breaks before overflow */
  .prose > * {
    page-break-inside: avoid;
    break-inside: avoid;
  }
  
  .prose table {
    page-break-before: auto;
    page-break-after: auto;
    page-break-inside: auto;
  }
}

/* A4 Page Sizing for Screen Preview */
.page-break {
  width: 210mm;
  min-height: 297mm;
  margin: 0 auto;
  background: white;
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  color-adjust: exact;
}

/* Content overflow handling */
@media screen {
  .page-break {
    position: relative;
  }
}

/* PREVIEW PAGE TABLE STYLING - MAXIMUM SPECIFICITY */
/* Target ALL possible table selectors */
.page-break table,
div[class*="prose"] table,
div table,
table {
  border-spacing: 0 !important;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06) !important;
  border-collapse: separate !important;
}

/* Table header background - ALL possible selectors */
.page-break table thead,
.page-break table thead tr,
.page-break table tr:first-child,
div[class*="prose"] table thead,
div[class*="prose"] table thead tr,
div[class*="prose"] table tr:first-child,
div table thead,
div table thead tr,
div table tr:first-child,
table thead,
table thead tr,
table tr:first-child {
  background: linear-gradient(135deg, #252E5D 0%, #0230F5 100%) !important;
}

/* Table header cells - ALL possible selectors */
.page-break table th,
.page-break table thead th,
.page-break table thead td,
.page-break table tr:first-child th,
.page-break table tr:first-child td,
div[class*="prose"] table th,
div[class*="prose"] table thead th,
div[class*="prose"] table thead td,
div[class*="prose"] table tr:first-child th,
div[class*="prose"] table tr:first-child td,
div table th,
div table thead th,
div table thead td,
div table tr:first-child th,
div table tr:first-child td,
table th,
table thead th,
table thead td,
table tr:first-child th,
table tr:first-child td,
th,
thead th,
thead td {
  background: transparent !important;
  color: #ffffff !important;
  font-weight: 700 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
  padding: 1rem 1.25rem !important;
  border: none !important;
  border-bottom: 2px solid #0230F5 !important;
}

/* Extra specific for text color only */
table th *,
table thead th *,
table thead td *,
table tr:first-child th *,
table tr:first-child td *,
th *,
thead th *,
thead td * {
  color: #ffffff !important;
}

/* Even more specific for paragraph and span elements in headers */
table th p,
table th span,
table thead th p,
table thead th span,
table thead td p,
table thead td span,
th p,
th span,
thead th p,
thead th span,
thead td p,
thead td span {
  color: #ffffff !important;
}

/* Table body rows */
.page-break table tbody tr,
div[class*="prose"] table tbody tr,
div table tbody tr,
table tbody tr,
.page-break table tr:not(:first-child),
div[class*="prose"] table tr:not(:first-child),
div table tr:not(:first-child),
table tr:not(:first-child) {
  background: transparent !important;
}

/* Odd rows */
.page-break table tbody tr:nth-child(odd) td,
.page-break table tr:nth-child(even) td,
div[class*="prose"] table tbody tr:nth-child(odd) td,
div[class*="prose"] table tr:nth-child(even) td,
div table tbody tr:nth-child(odd) td,
div table tr:nth-child(even) td,
table tbody tr:nth-child(odd) td,
table tr:nth-child(even) td {
  background-color: #ffffff !important;
}

/* Even rows */
.page-break table tbody tr:nth-child(even) td,
.page-break table tr:nth-child(odd) td,
div[class*="prose"] table tbody tr:nth-child(even) td,
div[class*="prose"] table tr:nth-child(odd) td,
div table tbody tr:nth-child(even) td,
div table tr:nth-child(odd) td,
table tbody tr:nth-child(even) td,
table tr:nth-child(odd) td {
  background-color: #f8fafc !important;
}

/* Table body cells */
.page-break table td,
.page-break table tbody td,
div[class*="prose"] table td,
div[class*="prose"] table tbody td,
div table td,
div table tbody td,
table td,
table tbody td {
  padding: 0.875rem 1.25rem !important;
  border: none !important;
  border-bottom: 1px solid #e2e8f0 !important;
  color: #334155 !important;
}

/* Last row no border */
.page-break table tbody tr:last-child td,
.page-break table tr:last-child td,
div[class*="prose"] table tbody tr:last-child td,
div[class*="prose"] table tr:last-child td,
div table tbody tr:last-child td,
div table tr:last-child td,
table tbody tr:last-child td,
table tr:last-child td {
  border-bottom: none !important;
}

/* RTL List Support - Bulletproof */
/* RTL Lists */
ul[style*="text-align: right"],
ol[style*="text-align: right"],
ul[style*="text-align:right"],
ol[style*="text-align:right"],
ul[dir="rtl"],
ol[dir="rtl"],
.ProseMirror ul[data-text-align="right"],
.ProseMirror ol[data-text-align="right"] {
  direction: rtl !important;
  padding-right: 2.5rem !important;
  padding-left: 0 !important;
  text-align: right !important;
}

/* LTR Lists */
ul[style*="text-align: left"],
ol[style*="text-align: left"],
ul[style*="text-align:left"],
ol[style*="text-align:left"],
ul[dir="ltr"],
ol[dir="ltr"],
.ProseMirror ul[data-text-align="left"],
.ProseMirror ol[data-text-align="left"] {
  direction: ltr !important;
  padding-left: 2.5rem !important;
  padding-right: 0 !important;
  text-align: left !important;
}

/* Default LTR for lists without direction */
ul:not([dir]):not([style*="text-align"]):not([data-text-align]),
ol:not([dir]):not([style*="text-align"]):not([data-text-align]) {
  direction: ltr;
  padding-left: 2.5rem;
  padding-right: 0;
}

/* Ensure list items inherit direction */
ul[dir="rtl"] li,
ol[dir="rtl"] li,
ul[style*="text-align: right"] li,
ol[style*="text-align: right"] li {
  text-align: right;
  direction: rtl;
}

ul[dir="ltr"] li,
ol[dir="ltr"] li,
ul[style*="text-align: left"] li,
ol[style*="text-align: left"] li {
  text-align: left;
  direction: ltr;
}


/* Reduce list item spacing for better formatting */
.prose ul li,
.prose ol li {
  margin-top: 0.25em !important;
  margin-bottom: 0.25em !important;
}

.prose ul,
.prose ol {
  margin-top: 0.5em !important;
  margin-bottom: 0.5em !important;
}

/* Nested lists */
.prose ul ul,
.prose ul ol,
.prose ol ul,
.prose ol ol {
  margin-top: 0.25em !important;
  margin-bottom: 0.25em !important;
}

@media print {
  .page-break table,
  div[class*="prose"] table,
  div table,
  table {
    box-shadow: none !important;
    filter: none !important;
  }
}
